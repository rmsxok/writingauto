<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>글쓰기 자동화 프로그램 · 3단계 마법사 (Standalone)</title>
  <style>
    html,body{margin:0;padding:0;background:#0b0c0f;color:#e7eaf0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Apple SD Gothic Neo','Noto Sans KR','Pretendard',Roboto,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}
    *{box-sizing:border-box}
    .grid-2{display:grid;grid-template-columns:2fr 1fr;gap:12px}
    .grid-2-equal{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .stack{display:flex;gap:8px}
    .title-h1{font-size:18px;font-weight:600}
    @media (max-width:860px){.grid-2,.grid-2-equal{grid-template-columns:1fr}.stack{flex-direction:column;align-items:stretch}.title-h1{font-size:16px}}
  </style>
  <!-- React 18 UMD + Babel Standalone for JSX in-browser -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    function App(){
      const palette = { bg:'#0b0c0f', card:'#111318', border:'#1b1e25', text:'#e7eaf0', muted:'#9aa3b2', accent:'#a3bffa', accentPress:'#7aa2f7' };

      // ------- State -------
      const [keyword, setKeyword] = useState('');
      const [referenceText, setReferenceText] = useState(''); // 2단계 참고 텍스트
      const [titleCount, setTitleCount] = useState(5);
      const [titleIdeas, setTitleIdeas] = useState([]);
      const [selectedTitle, setSelectedTitle] = useState('');

      // Step1 API
      const [useAI, setUseAI] = useState(false);
      const [apiKey, setApiKey] = useState('');

      // Step3 옵션
      const [authorType, setAuthorType] = useState('전문가 리뷰어');
      const [styleTone, setStyleTone] = useState('전문적이고 신뢰감 있는');
      const [authorCustom, setAuthorCustom] = useState('');
      const [toneCustom, setToneCustom] = useState('');
      const [userDraft, setUserDraft] = useState('');
      const [factLink, setFactLink] = useState('');
      const [minChars, setMinChars] = useState(1000);

      const [markdown, setMarkdown] = useState('');
      const [activeStep, setActiveStep] = useState(1);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');

      useEffect(()=>{ const saved = localStorage.getItem('naverWizard_openai_key')||''; setApiKey(saved); },[]);
      useEffect(()=>{ if(apiKey!==undefined) localStorage.setItem('naverWizard_openai_key', apiKey); },[apiKey]);

      // ------- Markdown -> HTML -------
      function mdToHtml(md){
        let h = md || '';
        h = h.replace(/^# (.+)$/gm,'<h1>$1</h1>');
        h = h.replace(/^## (.+)$/gm,'<h2>$1</h2>');
        h = h.replace(/^### (.+)$/gm,'<h3>$1</h3>');
        h = h.replace(/^> (.+)$/gm,'<blockquote>$1</blockquote>');
        h = h.replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>');
        h = h.replace(/\*(.+?)\*/g,'<em>$1</em>');
        h = h.replace(/`([^`]+)`/g,'<code>$1</code>');
        h = h.replace(/^\s*[-*]\s+(.+)$/gm,'<li>$1</li>');
        h = h.replace(/(<li>.*<\/li>\n?)+/g,(m)=>'<ul>'+m+'</ul>');
        h = h.replace(/\n\n+/g,'<br/><br/>' );
        return h;
      }
      const html = useMemo(()=>mdToHtml(markdown),[markdown]);

      // ------- Utilities -------
      function topTerms(text,k=4){
        const stop = new Set(['그리고','그러나','하지만','또는','또','이미','또한','그','이','저','것','수','때문','대한','에서','으로','하기','하는','있는','없는','합니다','했다','이다','같은','등','더','좀','매우','너무','되다','하다','있다','없다']);
        const counts = Object.create(null);
        (text||'').toLowerCase().replace(/[^\p{L}\p{N}\s]/gu,' ').split(/\s+/)
          .filter(w=>w && w.length>1 && !stop.has(w)).forEach(w=>counts[w]=(counts[w]||0)+1);
        return Object.entries(counts).sort((a,b)=>b[1]-a[1]).slice(0,k).map(([w])=>w);
      }

      // ------- Title generators -------
      function generateTitleIdeasLocal(baseKeyword,n,ref){
        if(!baseKeyword||!baseKeyword.trim()) return [];
        const base = baseKeyword.trim();
        const terms = topTerms(ref,4);
        const hint = terms.length?` (${terms.join(' · ')})`:'';
        const frames = [
          `${base} 완전정복: 실전 가이드`+hint,
          `${base} 핵심만 요약: 알아두면 좋은 포인트`+hint,
          `${base} 실패 없는 체크리스트`+hint,
          `${base} 최신 트렌드와 적용 사례`+hint,
          `${base} 자주 묻는 질문 TOP`+hint,
          `${base} 한눈에 이해하기: 10분 요약`+hint,
          `${base} 비용·시간 아끼는 실용 팁`+hint,
        ];
        const shuffled = [...frames].sort(()=>Math.random()-0.5);
        const count = Math.max(1, Number(n)||5);
        const out=[]; const used=new Set();
        for(let i=0;i<count;i++){
          const f = shuffled[i%shuffled.length];
          if(used.has(f)) continue; used.add(f); out.push(f);
        }
        return out;
      }

      async function generateTitleIdeasAI({baseKeyword,n,ref}){
        if(!apiKey) throw new Error('OpenAI API 키를 입력하세요.');
        const payload = {
          model: 'gpt-5',
          temperature: 0.7,
          messages: [
            { role:'system', content:'You generate Korean blog titles only. Return STRICT JSON {"titles":["..."]}.' },
            { role:'user', content:`키워드: ${baseKeyword}\n참고 텍스트 힌트: ${(ref||'').slice(0,500)}\n제목 개수: ${Math.max(1,Number(n)||5)}\n요구사항:\n- 한국어 제목만 생성\n- 클릭 과장 금지, 정보성 위주\n- 중복 패턴 최소화\n- JSON만 반환: {"titles":["제목1","제목2",...]}` }
          ]
        };
        const resp = await fetch('https://api.openai.com/v1/chat/completions',{
          method:'POST', headers:{'Content-Type':'application/json', Authorization:`Bearer ${apiKey}`}, body:JSON.stringify(payload)
        });
        if(!resp.ok){ const t = await resp.text(); throw new Error(`OpenAI 오류: ${resp.status} ${t}`); }
        const data = await resp.json();
        const content = data?.choices?.[0]?.message?.content || '{}';
        let parsed; try{ parsed = JSON.parse(content); }catch{ parsed = JSON.parse(content.replace(/^```json\n?|```$/g,'')); }
        const arr = Array.isArray(parsed?.titles)?parsed.titles:[];
        return arr.filter(Boolean).slice(0, Math.max(1, Number(n)||5));
      }

      // ------- Body generator -------
      function generateBody({ title, minChars, authorType, styleTone, userDraft, factLink }){
        const effAuthor = authorType === '기타(직접 입력)' ? (authorCustom||'사용자 지정') : authorType;
        const effTone = styleTone === '기타(직접 입력)' ? (toneCustom||'사용자 지정') : styleTone;

        const h2sBase = [
          '핵심 개념 한눈에 정리', '상황별 문제와 해결 시나리오', '단계별 실천 가이드', '검증된 팁 & 체크리스트',
          '자주 묻는 질문과 답변', '실전 적용 사례 ①', '실전 적용 사례 ②', '주의할 점과 리스크 관리', '추가 자료와 확장 아이디어'
        ];
        const refTerms = topTerms(userDraft,3);
        const h2s = h2sBase.slice(0, 6 + Math.floor(Math.random()*3));
        if(refTerms[0]) h2s[0] = `핵심 개념: ${refTerms[0]} 중심으로`;
        if(refTerms[1] && h2s[2]) h2s[2] = `실천 가이드: ${refTerms[1]} 시작하기`;
        if(refTerms[2] && h2s[3]) h2s[3] = `체크리스트: ${refTerms[2]} 점검`;

        const opener =
          effTone === '친근하고 유쾌한' ? '가볍게 시작해 볼게요. 핵심만 딱 잡으면 생각보다 쉬워요.' :
          effTone === '진지하고 정보성 강한' ? '핵심 정보를 간결하게 정리합니다. 과장 없이 근거 중심으로 설명합니다.' :
          '전문성과 신뢰를 바탕으로 실전적인 관점에서 정리합니다.';

        let md = `# ${title}\n\n> 작성자 유형: **${effAuthor}**, 톤앤매너: **${effTone}**\n\n## 서론\n${opener}\n이 글은 문제를 짚고 해결 방향을 제시한 뒤, 바로 적용할 수 있는 단계별 가이드를 제공합니다.${userDraft ? ' 아래 초안을 참고하여 흐름과 강조점을 반영했습니다.' : ''}\n\n`;
        if(userDraft){ md += `> 제공된 초안(요약): ${userDraft.slice(0,200)}${userDraft.length>200?'…':''}\n\n`; }

        md += `## 본문\n`;
        h2s.forEach((h2,idx)=>{
          let section = `\n### ${h2}\n- 핵심 포인트: 주제를 한 문장으로 요약합니다.\n- 왜 중요한가: 실제 문제 상황에서 어떤 차이를 만드는지 설명합니다.\n- 어떻게: 2~3단계로 바로 실행 가능한 방법을 제시합니다.\n- 예시: 간단한 미니 사례를 들어 이해를 돕습니다.\n`;
          while(new Blob([section]).size < 650){
            section += `- 팁: 작은 실험으로 시작하고 기록을 남기면 개선 속도가 빨라집니다.\n`;
            section += `- 주의: 맥락 없이 따라 하면 효과가 떨어질 수 있습니다. 자신의 상황에 맞춰 조정하세요.\n`;
            if(idx%2===0) section += `- 보너스: 체크리스트로 마무리 점검을 하면 누락을 줄일 수 있습니다.\n`;
          }
          md += section + "\n";
        });

        md += `### 실전 적용 사례 ①\n- 배경: 작은 목표로 시작해 빠르게 반복한 사례.\n- 실행: 1) 기준 정하기 2) 기록하기 3) 개선 포인트 반영.\n- 결과: 단기간에 가시적인 변화 확인, 재현 가능성 높음.\n\n### 실전 적용 사례 ②\n- 배경: 팀 단위로 프로세스를 표준화한 사례.\n- 실행: 1) 역할 정의 2) 체크리스트 운영 3) 피드백 루프.\n- 결과: 품질 편차 감소, 작업 시간 단축, 재사용성 향상.\n\n`;

        if((factLink||'').trim()){
          md += `> 팩트 체크: 아래 출처를 참고해 핵심 주장/숫자를 검토했습니다.\n> ${factLink.trim()}\n\n`;
        }

        md += `## 결론\n핵심을 다시 정리하면, **작게 시작 → 빠른 기록 → 반복 개선**이 성과를 가깝게 만듭니다.\n마지막으로 독자님께 묻습니다. 지금 바로 적용해 볼 수 있는 가장 작은 실험은 무엇인가요? 댓글로 공유해 주세요!\n\n## 추천 태그\n#가이드 #체크리스트 #실전팁 #사례분석 #문제해결 #초보가이드 #전략 #프로세스 #반복개선 #품질관리\n`;

        const need = Math.max(800, Number(minChars)||1000);
        while(md.length < need){ md += `\n> 참고: 오늘 한 가지라도 작게 적용해 보세요. 작은 성공이 다음 행동을 쉽게 만듭니다.`; }
        return md;
      }

      // ------- Actions -------
      const canGoStep2 = (keyword||'').trim().length>0;
      const canGoStep3 = (selectedTitle||'').trim().length>0;

      async function onGenerateTitles(){
        try{
          setError(''); setLoading(true);
          let ideas=[];
          if(useAI && apiKey){
            ideas = await generateTitleIdeasAI({ baseKeyword: keyword, n: titleCount, ref: referenceText });
          } else {
            ideas = generateTitleIdeasLocal(keyword, titleCount, referenceText);
          }
          if(!ideas || ideas.length===0){ ideas = generateTitleIdeasLocal(keyword, titleCount, referenceText); }
          setTitleIdeas(ideas); setSelectedTitle('');
        }catch(e){ setError(e.message||String(e)); }
        finally{ setLoading(false);} }

      function onGenerateBody(){
        const md = generateBody({ title: selectedTitle, minChars, authorType, styleTone, userDraft, factLink });
        setMarkdown(md);
      }

      // ------- Styles -------
      const styles = {
        header:{position:'sticky',top:0,backdropFilter:'blur(6px)',borderBottom:`1px solid ${palette.border}`,background:'rgba(11,12,15,.65)',marginBottom:16,zIndex:10},
        container:{maxWidth:1120,margin:'0 auto',padding:'12px 12px',display:'flex',alignItems:'center',justifyContent:'space-between',flexWrap:'wrap',gap:8},
        logo:{width:36,height:36,borderRadius:16,display:'grid',placeItems:'center',fontWeight:700,background:'linear-gradient(180deg,#20314f,#101828)',color:'#dbe7ff'},
        tabs:{display:'flex',gap:8,margin:'12px 12px'},
        tab:(active)=>({border:`1px solid ${palette.border}`,borderRadius:12,padding:'8px 14px',background:active?'#111827':'#0c0f14',color:active?palette.text:palette.muted,cursor:'pointer',flex:1,minWidth:90}),
        card:{background:palette.card,border:`1px solid ${palette.border}`,borderRadius:16,padding:20,margin:'0 12px 16px'},
        stepHead:{borderBottom:`1px solid ${palette.border}`,paddingBottom:8,marginBottom:12,display:'flex',alignItems:'center',justifyContent:'space-between',gap:8,flexWrap:'wrap'},
        pill:{padding:'2px 9px',borderRadius:9999,fontSize:12,background:'#0f1116',color:palette.muted,border:`1px solid ${palette.border}`},
        label:{fontSize:12,color:palette.muted,display:'block',marginBottom:6},
        input:{background:'#0e1117',color:palette.text,border:`1px solid ${palette.border}`,borderRadius:12,padding:'10px 12px',width:'100%'},
        number:{background:'#0e1117',color:palette.text,border:`1px solid ${palette.border}`,borderRadius:12,padding:'10px 12px',width:'100%'},
        textarea:{background:'#0e1117',color:palette.text,border:`1px solid ${palette.border}`,borderRadius:12,padding:12,width:'100%',minHeight:120},
        btn:{backgroundImage:`linear-gradient(180deg, ${palette.accent}, ${palette.accentPress})`,color:'#0b1020',fontWeight:600,borderRadius:14,padding:'10px 16px',border:0,cursor:'pointer'},
        btnGhost:{background:'transparent',color:palette.text,border:`1px solid ${palette.border}`,borderRadius:12,padding:'9px 14px',cursor:'pointer'},
        note:{fontSize:12,color:palette.muted},
        h3:{fontWeight:600,marginBottom:8,color:'#e9edf7'},
        prose:{border:`1px solid ${palette.border}`,background:palette.card,borderRadius:16,padding:16,minHeight:240},
        sticky:{position:'fixed',bottom:0,left:0,right:0,background:'rgba(11,12,15,.9)',borderTop:`1px solid ${palette.border}`,padding:10,display:'flex',gap:8,justifyContent:'space-between',zIndex:20}
      };

      return (
        <div>
          <header style={styles.header}>
            <div style={styles.container}>
              <div style={{display:'flex',alignItems:'center',gap:12}}>
                <div style={styles.logo}>AW</div>
                <h1 className="title-h1">글쓰기 자동화 프로그램 · 3단계 마법사</h1>
              </div>
            </div>
          </header>

          <nav style={styles.tabs}>
            {[1,2,3].map(n=> (
              <button key={n} style={styles.tab(activeStep===n)} onClick={()=>setActiveStep(n)}>{n}단계</button>
            ))}
          </nav>

          {activeStep===1 && (
            <section style={styles.card}>
              <div style={styles.stepHead}>
                <h2 style={{fontSize:16,fontWeight:600}}>1. API 연동 선택(선택)</h2>
                <span style={styles.pill}>STEP 1</span>
              </div>
              <div style={{display:'grid',gap:12}}>
                <label style={{...styles.label,display:'flex',alignItems:'center',gap:8}}>
                  <input type="checkbox" checked={useAI} onChange={(e)=>setUseAI(e.target.checked)} />
                  OpenAI API 사용
                </label>
                {useAI && (
                  <div>
                    <label style={styles.label}>OpenAI API 키</label>
                    <input type="password" value={apiKey} onChange={(e)=>setApiKey(e.target.value)} placeholder="sk-..." style={styles.input} />
                  </div>
                )}
                <div style={styles.note}>
                  <b style={{color:'#e2e8f0'}}>차이점</b><br/>
                  - API 사용: 참고 텍스트의 톤/어휘 반영한 <b>AI 기반 제목</b> 생성(품질↑).<br/>
                  - 미사용: 인터넷/키 없이 동작하는 <b>로컬 규칙 기반</b> 제목 생성(속도/안정성↑).
                </div>
              </div>
              <div style={{marginTop:16,display:'flex',gap:8,justifyContent:'flex-end'}}>
                <button onClick={()=>setActiveStep(2)} style={styles.btn}>다음(2단계)</button>
              </div>
            </section>
          )}

          {activeStep===2 && (
            <section style={styles.card}>
              <div style={styles.stepHead}>
                <h2 style={{fontSize:16,fontWeight:600}}>2. 키워드/개수 & 참고 텍스트</h2>
                <span style={styles.pill}>STEP 2</span>
              </div>
              <div className="grid-2">
                <div>
                  <label style={styles.label}>키워드(쉼표 구분 허용)</label>
                  <input value={keyword} onChange={(e)=>setKeyword(e.target.value)} placeholder="예) AI, 블로그 자동화, 생산성" style={styles.input} />
                </div>
                <div>
                  <label style={styles.label}>제목 생성 개수</label>
                  <input type="number" min={1} max={20} value={titleCount} onChange={(e)=>{ const v=parseInt(e.target.value||'0',10); setTitleCount(Number.isFinite(v)?v:5); }} style={styles.number} />
                </div>
              </div>
              <div style={{marginTop:12}}>
                <label style={styles.label}>참고 텍스트 (느낌/어휘 반영)</label>
                <textarea value={referenceText} onChange={(e)=>setReferenceText(e.target.value)} placeholder="이 문단의 톤/리듬/어휘를 참고해 제목을 만들어줘…" style={styles.textarea} />
              </div>
              <div style={{marginTop:16,display:'flex',gap:8,flexWrap:'wrap'}}>
                <button disabled={loading || !(keyword||'').trim().length} onClick={onGenerateTitles} style={{...styles.btn,opacity:(!(keyword||'').trim().length||loading)?0.5:1}}>
                  {loading? '생성 중...' : (useAI && apiKey ? 'AI로 제목 생성' : '로컬 규칙으로 제목 생성')}
                </button>
                {error && <span style={{color:'#fca5a5',fontSize:12}}>오류: {error}</span>}
              </div>
              {titleIdeas.length>0 && (
                <>
                  <div className="grid-2-equal" style={{marginTop:16}}>
                    {titleIdeas.map((t,i)=> (
                      <label key={i} style={{...styles.card,padding:12,cursor:'pointer',boxShadow:selectedTitle===t?`0 0 0 2px ${palette.accentPress} inset`:'none'}}>
                        <input type="radio" name="pickTitle" checked={selectedTitle===t} onChange={()=>setSelectedTitle(t)} style={{marginRight:8}} />
                        <span>{t}</span>
                      </label>
                    ))}
                  </div>
                  <div style={{marginTop:16,display:'flex',gap:8,justifyContent:'space-between',flexWrap:'wrap'}}>
                    <button onClick={()=>setActiveStep(1)} style={styles.btnGhost}>이전(1단계)</button>
                    <button disabled={!selectedTitle.trim().length} onClick={()=>setActiveStep(3)} style={{...styles.btn,opacity:selectedTitle.trim().length?1:0.5}}>다음(3단계: 본문)</button>
                  </div>
                </>
              )}
            </section>
          )}

          {activeStep===3 && (
            <section style={styles.card}>
              <div style={styles.stepHead}>
                <h2 style={{fontSize:16,fontWeight:600}}>3. 선택한 제목으로 본문 작성</h2>
                <span style={styles.pill}>STEP 3</span>
              </div>

              <div className="grid-2" style={{alignItems:'end'}}>
                <div>
                  <label style={styles.label}>선택한 제목</label>
                  <input value={selectedTitle} onChange={(e)=>setSelectedTitle(e.target.value)} style={styles.input} />
                </div>
                <div>
                  <label style={styles.label}>최소 글자수</label>
                  <input type="number" min={800} step={100} value={minChars} onChange={(e)=>{ const v=parseInt(e.target.value||'0',10); setMinChars(Number.isFinite(v)?v:1000); }} style={styles.number} />
                </div>
              </div>

              <div className="grid-2" style={{marginTop:12}}>
                <div>
                  <label style={styles.label}>작성자 유형 (선택)</label>
                  <select value={authorType} onChange={(e)=>setAuthorType(e.target.value)} style={{...styles.input,padding:'8px 12px'}}>
                    <option>친근한 20대 여성 인플루언서</option>
                    <option>전문가 리뷰어</option>
                    <option>공급자</option>
                    <option>실무 매니저</option>
                    <option>경험 풍부한 사용자</option>
                    <option>기타(직접 입력)</option>
                  </select>
                  {authorType==='기타(직접 입력)' && (
                    <input value={authorCustom} onChange={(e)=>setAuthorCustom(e.target.value)} placeholder="예: 브랜드 마케터 / 창업자 시점" style={{...styles.input,marginTop:8}} />
                  )}
                </div>
                <div>
                  <label style={styles.label}>톤앤매너 (선택)</label>
                  <select value={styleTone} onChange={(e)=>setStyleTone(e.target.value)} style={{...styles.input,padding:'8px 12px'}}>
                    <option>친근하고 유쾌한</option>
                    <option>전문적이고 신뢰감 있는</option>
                    <option>진지하고 정보성 강한</option>
                    <option>담백하고 간결한</option>
                    <option>기타(직접 입력)</option>
                  </select>
                  {styleTone==='기타(직접 입력)' && (
                    <input value={toneCustom} onChange={(e)=>setToneCustom(e.target.value)} placeholder="예: 차분하고 분석적인 / 위트있는 대화체" style={{...styles.input,marginTop:8}} />
                  )}
                </div>
              </div>

              <div style={{marginTop:12}}>
                <label style={styles.label}>글 초안 (선택)</label>
                <textarea value={userDraft} onChange={(e)=>setUserDraft(e.target.value)} placeholder="있다면 초안/핵심 포인트를 붙여넣어 주세요. 흐름과 강조점을 반영해 본문을 구성합니다." style={styles.textarea} />
              </div>
              <div style={{marginTop:12}}>
                <label style={styles.label}>팩트체크 링크 (선택)</label>
                <input type="url" value={factLink} onChange={(e)=>setFactLink(e.target.value)} placeholder="https://example.com/data" style={styles.input} />
              </div>

              <div style={{marginTop:16,display:'flex',alignItems:'center',gap:8,justifyContent:'flex-end',flexWrap:'wrap'}}>
                <div style={styles.note}>* 작성자/톤/초안/링크는 선택사항입니다.</div>
                <button disabled={!selectedTitle.trim().length || loading} onClick={onGenerateBody} style={{...styles.btn,opacity:(!selectedTitle.trim().length||loading)?0.5:1}}>
                  {loading? '생성 중...' : (useAI && apiKey ? 'AI로 본문 생성(데모는 로컬)' : '로컬 규칙으로 본문 생성')}
                </button>
                {error && <span style={{color:'#fca5a5',fontSize:12}}>오류: {error}</span>}
              </div>

              <div className="grid-2-equal" style={{marginTop:16}}>
                <div>
                  <h3 style={styles.h3}>미리보기 (HTML 렌더)</h3>
                  <div style={styles.prose} dangerouslySetInnerHTML={{__html: html}} />
                </div>
                <div>
                  <h3 style={styles.h3}>마크다운 원문</h3>
                  <textarea value={markdown} onChange={(e)=>setMarkdown(e.target.value)} rows={16} style={styles.textarea} />
                </div>
              </div>

              <div style={{marginTop:16,display:'flex',gap:8,alignItems:'center',justifyContent:'space-between'}}>
                <div style={styles.note}>* 네이버 호환 HTML 렌더(스크립트/외부 CSS 없음).</div>
                <div style={{display:'flex',gap:8}}>
                  <button onClick={()=>setActiveStep(2)} style={styles.btnGhost}>이전(2단계)</button>
                  <button onClick={()=>window.scrollTo({top:0,behavior:'smooth'})} style={styles.btnGhost}>맨 위로</button>
                </div>
              </div>
            </section>
          )}

          <div style={{position:'fixed',bottom:0,left:0,right:0,background:'rgba(11,12,15,.9)',borderTop:'1px solid #1b1e25',padding:10,display:'flex',gap:8,justifyContent:'space-between',zIndex:20}}>
            <button onClick={()=>setActiveStep(Math.max(1,activeStep-1))} style={styles.btnGhost}>이전</button>
            <div style={{display:'flex',gap:8}}>
              {activeStep===2 && (
                <button disabled={loading || !(keyword||'').trim().length} onClick={onGenerateTitles} style={{...styles.btn,opacity:(!(keyword||'').trim().length||loading)?0.5:1}}>{loading?'생성 중...':'제목 생성'}</button>
              )}
              {activeStep===3 && (
                <button disabled={!selectedTitle.trim().length} onClick={onGenerateBody} style={{...styles.btn,opacity:selectedTitle.trim().length?1:0.5}}>본문 생성</button>
              )}
              <button onClick={()=>setActiveStep(Math.min(3,activeStep+1))} style={styles.btn}>다음</button>
            </div>
          </div>

          <footer style={{maxWidth:1120,margin:'32px auto',padding:'0 12px'}}>
            <hr style={{borderColor:'#1b1e25',margin:'12px 0'}} />
            <p style={{fontSize:12,color:'#9aa3b2'}}>모바일/데스크톱 반응형. API 키는 로컬 스토리지에만 저장됩니다. 공개 배포 시에는 서버 프록시를 사용하세요.</p>
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);
  </script>
</body>
</html>